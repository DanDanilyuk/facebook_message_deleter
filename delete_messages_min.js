!async function(){const e=function(){document.getElementById("ird")&&document.getElementById("ird").remove();const e=document.createElement("div");e.id="ird",e.style.cssText="position:fixed; opacity:1; width:100%; top:0; left:0; background-color:#4267B2; color:white; z-index:99999999999999; height:55px; font-family: sans-serif; display:flex; align-items:center; justify-content:center;";const t=document.createElement("h2");t.style.cssText="color:white; font-size:18px; font-weight:500; margin:0;",t.textContent="Detecting Messages...";const n=document.createElement("button");return n.id="btnclose",n.style.cssText="cursor:pointer; background-color:#d9534f; color:white; border:1px solid maroon; border-radius:5px; padding:6px 12px; font-size:15px; margin-left: 20px;",n.textContent="STOP",n.addEventListener("click",(()=>{o=!0})),e.append(t,n),document.body.prepend(e),{bar:e,status:t,closeBtn:n}}();let t=0,n=0,o=!1;async function r(e,t=3e3){const n=Date.now();for(;Date.now()-n<t;){const t=e();if(t)return t;await new Promise((e=>setTimeout(e,50)))}return null}async function i(){document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",bubbles:!0})),await r((()=>!document.querySelector('[role="menu"]')&&!document.querySelector('[role="dialog"]')))}const l=new WeakMap;for(;!o;){if(t>=50){const o=`Deleted ${t} / 50. Limit reached.`;e.status.textContent=o+(n?` (${n} skipped)`:""),e.bar.style.backgroundColor="#e6b800",alert(`${t} messages deleted. Please reload to avoid temporary bans.`);break}const o=[...document.querySelectorAll('div[role="row"] a[href*="messages/t/"]')].map((e=>e.closest('div[role="row"]'))).filter(Boolean);if(!o.length){const o=`Finished. Deleted ${t}.`;e.status.textContent=o+(n?` (${n} skipped)`:""),e.closeBtn.remove();break}const s=o[0];try{const o=await r((()=>s.querySelector('div[aria-label^="More options"]')||s.querySelector('div[aria-label="Menu"]')||s.querySelector(".x1i10hfl.x1qjc9v5.xjbqb8w")||s.querySelector(".x10f5nwc.xi81zsa")||s.querySelector(".x1i10hfl.xjqpnuy.xc5r6h4")));if(!o){const e=(l.get(s)||0)+1;l.set(s,e),e>=3&&(console.warn("Skipping row — menu button not found after retries"),s.style.display="none",n++);continue}o.click();const c=await r((()=>[...document.querySelectorAll('[role="menuitem"]')].find((e=>e.textContent.toLowerCase().includes("delete")||e.innerText.includes("Delete chat")||e.innerText.includes("Delete conversation")||e.innerText.includes("Delete selected")))));if(!c){const e=(l.get(s)||0)+1;l.set(s,e),await i(),e>=3&&(console.warn("Skipping row — delete option not found after retries"),s.style.display="none",n++);continue}c.click();const a=await r((()=>{const e=document.querySelector('[role="dialog"]'),t=[...(e||document).querySelectorAll(".x1i10hfl.xjbqb8w.x6umtig.x1b1mbwd.xaqea5y.xav7gou.x9f619 button, .x1s688f.xtk6v10, .n75z76so.ed17d2qt, .x1xmf6yo")];return!t.length&&e&&t.push(...e.querySelectorAll("button")),t.find((e=>e.textContent.includes("Delete Chat")||e.textContent.includes("Delete Conversation")||e.textContent.includes("Delete")&&!e.textContent.includes("Cancel")||e.getAttribute("aria-label")?.includes("Delete")))}));if(!a){const e=(l.get(s)||0)+1;l.set(s,e),await i(),e>=3&&(console.warn("Skipping row — confirm button not found after retries"),s.style.display="none",n++);continue}a.click(),await r((()=>!document.body.contains(s))),t++,e.status.textContent=`Deleted ${t} / 50...`}catch(e){console.error("Error during deletion, skipping row:",e),await i(),s.style.display="none",n++}}if(o){await i();const o=`Stopped. Deleted ${t}.`;e.status.textContent=o+(n?` (${n} skipped)`:""),e.bar.style.backgroundColor="#e6b800",e.closeBtn.textContent="Close",e.closeBtn.onclick=()=>e.bar.remove()}}();